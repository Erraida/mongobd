<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="main.css">
	<script
	  src="https://code.jquery.com/jquery-3.6.0.js"
	  integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
	  crossorigin="anonymous"></script>
	<title>Запросы</title>
</head>
<body>
	 <form method="POST" class="air" name="formdata">
	<div class="form-inner">
	<div class="stripes-block"></div>
	<div class="form-row">
	<label for="name">Название</label>
	<input type="text" id="name" required>
	</div>
	<div class="form-row">
	<label for="address">Текст</label>
	<textarea rows="3" id="address" required></textarea>
	</div>
	
	<div class="form-row-icon">
	<i class="fa fa-paper-plane-o"></i>
	<input type="submit" value="отправить" name="senddata">
	</div>
	</div>
</form>
<script type="module">
	function getRandomInt() {
  		return Math.floor(Math.random() * 1000000);
	}
	document.forms['formdata'].onsubmit = function(){

		let title = document.getElementById('name').value;
		let text = document.getElementById('address').value;
		let id = getRandomInt()
		var data_set = {
			'id' : id,
			'title' : title,
			'text' : text
		}
		console.log(data_set);


		$.ajax({
			url: 'https://realm.mongodb.com/api/client/v2.0/app/application-0-kuunh/graphql',         /* Куда пойдет запрос */
			method: 'post',            
			headers: {
		        'Content-Type':'application/json',
		        'api-key':'kS8LnhKZj5Je7jzBXZHzLAwwR4tfulfLmjSnsOR2DNakYQ0seCaK9PnAmGQfEDuU',
		        'apiKey':'kS8LnhKZj5Je7jzBXZHzLAwwR4tfulfLmjSnsOR2DNakYQ0seCaK9PnAmGQfEDuU',
		    },
			data: data_set,     
			success: function(data){  
				alert(data); 

			},
			error: function(data){
            console.log(error)
        }
		});
  
		return false;
	}


</script>
</body>
</html>
